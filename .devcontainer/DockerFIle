FROM mcr.microsoft.com/vscode/devcontainers/universal:2.0.9-linux

# Install build tools, Python, perf, PAPI, TVM deps
RUN apt-get update && apt-get install -y --no-install-recommends \
    build-essential cmake git python3 python3-pip \
    linux-tools-generic              \  # perf stat, record :contentReference[oaicite:1]{index=1}
    libpapi-dev papi-tools            \  # PAPI counters :contentReference[oaicite:2]{index=2}
    && rm -rf /var/lib/apt/lists/*

# (Optional) Install TVM Python API
RUN pip3 install --no-cache-dir \
    tvm                             \
    numpy

# Copy setup script
COPY setup.sh /tmp/setup.sh
RUN chmod +x /tmp/setup.sh
